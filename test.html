<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery UI Dialog - Default functionality</title>
  <link rel="stylesheet" href="http://cdn.bootcss.com/twitter-bootstrap/3.0.2/css/bootstrap.min.css">

<!-- 可选的Bootstrap主题文件（一般不用引入） -->
<link rel="stylesheet" href="http://cdn.bootcss.com/twitter-bootstrap/3.0.2/css/bootstrap-theme.min.css">

<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->


  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css">
  <link rel="stylesheet" type="text/css" href="layer.css"/>
  <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="http://cdn.bootcss.com/twitter-bootstrap/3.0.2/js/bootstrap.min.js"></script>
<style>
#popup_shading {
    background: none repeat scroll 0 0 #000000;
    display: block;
    height: 100%;
    left: 0;
    opacity: 0.5;
    position: fixed;
    top: 0;
    width: 100%;
    display:none;
    //z-index: 9999;
}
</style>
  <script>
  $(function() {
    // <div class='selected-inline' name='selected-inline'><label><input type='checkbox' value='0'>0</label></div>
    str_checkbox = [ "<div class='selected-inline' name='selected-inline'><label><input type='checkbox' checked value='", 0, "'>", 0, "</label></div>"]
    // str_checkbox.join("")
    var mapping = function(val, $el){
      var t = null
      $el.each(function(i, v){
        if($(v).find('input[type="checkbox"]').val() === val){
          t = v
          return
        } 
      })
      return t
    }
    $sel_group = $("#selected-group").children()
    $cdd_group = $('label').filter('.checkbox-inline')
    $cdd_group.each(function(i, v){
      $(v).on('click', function(){
        $chk = $(this).children()
        if($chk.prop('checked')){
          str_checkbox[1] = $chk.val()
          str_checkbox[3] = $chk.parent().text()
          $sel_group.append(str_checkbox.join(""))
        }else{
          // $sel_group.children().filter('value="'+$chk.val()+'"')
        }
      });
    });
    $(".selected-inline").on('click', 'label', function(){
      $t = $(this).find('input[type="checkbox"]')
      mapping($t.val(), $("#checkboxes-group").children())
    })
    $("#test").click(function(){
    $("#popup_shading").show();       
    $( "#dialog" ).dialog({
      width: 500,
      height: 333,
      close: function(event, ui){$("#popup_shading").hide();}
    });
    })

  });
  </script>
</head>
<body>
 <input type='button' id='test' value='demo'>
<div id="popup_shading"></div>
<div id="dialog" title="Basic dialog" style='display:none'>
    <div class="box">   
        <div id="divSelecting">         
          <div class="form-inline">            
            <span id="selectingHeader"></span>
            <div class="form-group">
              <label class="sr-only" for="exampleInputEmail2">Product Name</label>
              <input type="text" class="form-control" id="exampleInputEmail2" placeholder="Enter product">
            </div>
            <button type="submit" class="btn btn-default">Search</button>     
          </div>       
        </div>
        <div id="selected-group">      
          <div class="dy-controls">                   
            <div class="selected-inline" name="100" id="$11">                           
                <label for="1">             
                </label>            
            </div>           
            <div class="selected-inline" name="100" id="$2">             
                <label for="2">             
                </label>                         
            </div>           
            <div class="selected-inline" name="100" id="$3">             
                <label for="3">             
                </label>              
            </div>             
          </div>
        </div>
        <div id="checkboxes-group">      
          <div class="controls">                   
            <div class="checkbox-inline" name="100" id="123">                           
                <label class="checkbox-inline" for="1">             
                  <input type="checkbox" value="1@1" id="1">1
                </label>            
            </div>           
            <div class="checkbox-inline" name="100" id="$2">             
                <label class="checkbox-inline" for="2">             
                  <input type="checkbox" value="2@2" id="2">2
                </label>                         
            </div>           
            <div class="checkbox-inline" name="100" id="$3">             
                <label class="checkbox-inline" for="3">             
                  <input type="checkbox" value="3@3" id="3">3
                </label>              
            </div>             
          </div>
        </div>     
</div>
</div>
 